<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The NPC Project: SDX EntityAlive</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The NPC Project
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">A collection of classes to enable muti-use NPCs and animal husbandry.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/df6/md__mods__s_d_x__entity_alive_s_d_x__read_me.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SDX EntityAlive </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This project contains a few different classes to enable more flexible NPCs and animals.</p>
<h2><a class="el" href="../../dc/dd7/class_entity_alive_s_d_x.html">EntityAliveSDX</a> </h2>
<p>This is the new base class, which inherits from EntityNPC and all the sub classes. It has new features, such as allowing them to be hired and execute your orders.</p>
<p>NPCs can accept orders by interacting with them and selecting one of pre-made options. Using a combination of XML dialog settings and code, some dialog options will not appear unless they make sense. For example, when you first meet an NPC, you will not be able to give them orders.</p>
<p>NPCs can be hired either by paying their Hire Cost, completing a quest line, or have some sort of incentive for them to follow.</p>
<p>Using the new Maslow AI Task, along with the buff system, NPCs require and can consume food and water.</p>
<h2>Hiring NPCs</h2>
<p>Each unique NPC can have its own hiring cost and currency, available through the XML properties. By default, this is 1000 casino coins. The HireCurrency is any available Item, and that item will be removed from your inventory when you hire them.</p>
<h4>Examples:</h4>
<p>Default: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;HireCost&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;1000&quot;</span>/&gt;</div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;HireCurrency&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;casinoCoin&quot;</span>/&gt;</div></div><!-- fragment --><p>Unique Item: </p><div class="fragment"><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;HireCost&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;1&quot;</span>/&gt;</div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;HireCurrency&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;BloomsFamilyHeirloom_1&quot;</span>/&gt;</div></div><!-- fragment --><p>Currently, all NPCs are hired for the duration of their life. Once NPCs are hired, your entity ID is stored with the entity as a cvar "Leader". As soon as they are hired, they'll begin to follow you, and try to keep pace with your speed.</p>
<p>Initially, unhired NPCs will only show a few options in the dialog. However, when they are hired, they can do more for you.</p>
<h3>Orders</h3>
<ul>
<li>ShowMe - This displays information about the entity in a tool tip window, and in the console. This will show you their health, name, and hunger levels. </li>
<li>ShowAffection - This just displays a tool tip. TODO: have it positively impact the entity </li>
<li>FollowMe - The entity will follow you, keeping a distance of 3 to 5 spaces behind you. They'll try to match your walk and run speed. </li>
<li>Stayhere - The entity will stay in place </li>
<li>GuardHere - The entity will stand in your place, facing your initial direction. This will set the GuardPosition, allow the guard to return to that spot after a fight. </li>
<li>Wander - The entity will walk around the area </li>
<li>SetPatrol - The entity will begin following your foot steps, recording them as Patrol Coordinates </li>
<li>Patrol - The entity, if it has patrol coordinates, will begin tracing the coordinates back and forth. This option only shows if it has Patrol Coordinates </li>
<li>Hire - If unhired, the entity will allow you to hire them. Their cost depends on their XML settings. </li>
<li>OpenInventory - This will open their inventory </li>
<li>Loot - This tells the entity to Loot the POI you are in now.</li>
</ul>
<p>Options can be filtered through using the SDX_Dialog class that adds new conditions to show statements based on if they are hired. Not all NPCs need to support all the tasks.</p>
<p>Here's a sample Dialog XML that show's the Hire option. If the NPC is not hired, and will not show the ShowMe and StayHere orders until it is hired.</p>
<h4>Sample Dialog</h4>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">response</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;Hire&quot;</span> <span class="keyword">text</span>=<span class="stringliteral">&quot;I am interested in hiring you.&quot;</span> &gt;</div><div class="line">    &lt;<span class="keywordtype">requirement</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;HiredSDX, Mods&quot;</span> <span class="keyword">requirementtype</span>=<span class="stringliteral">&quot;Hide&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;not&quot;</span>/&gt;</div><div class="line">    &lt;<span class="keywordtype">action</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;OpenDialogSDX, Mods&quot;</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;Hire&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">response</span>&gt;</div><div class="line">      </div><div class="line">&lt;<span class="keywordtype">response</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;FollowMe&quot;</span> <span class="keyword">text</span>=<span class="stringliteral">&quot;Follow me&quot;</span> &gt;</div><div class="line">    &lt;<span class="keywordtype">requirement</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;HiredSDX, Mods&quot;</span> <span class="keyword">requirementtype</span>=<span class="stringliteral">&quot;Hide&quot;</span>/&gt;</div><div class="line">    &lt;<span class="keywordtype">action</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;ExecuteCommandSDX, Mods&quot;</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;FollowMe&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">response</span>&gt;</div><div class="line"></div><div class="line">&lt;<span class="keywordtype">response</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;ShowMe&quot;</span> <span class="keyword">text</span>=<span class="stringliteral">&quot;Show Me your inventory&quot;</span> &gt;</div><div class="line">    &lt;<span class="keywordtype">requirement</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;HiredSDX, Mods&quot;</span> <span class="keyword">requirementtype</span>=<span class="stringliteral">&quot;Hide&quot;</span> /&gt;</div><div class="line">    &lt;<span class="keywordtype">action</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;ExecuteCommandSDX, Mods&quot;</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;OpenInventory&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">response</span>&gt;</div><div class="line"></div><div class="line">&lt;<span class="keywordtype">response</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;StayHere&quot;</span> <span class="keyword">text</span>=<span class="stringliteral">&quot;Stay here&quot;</span> &gt;</div><div class="line">    &lt;<span class="keywordtype">requirement</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;HiredSDX, Mods&quot;</span> <span class="keyword">requirementtype</span>=<span class="stringliteral">&quot;Hide&quot;</span> /&gt;</div><div class="line">    &lt;<span class="keywordtype">action</span> <span class="keyword">type</span>=<span class="stringliteral">&quot;ExecuteCommandSDX, Mods&quot;</span> <span class="keyword">id</span>=<span class="stringliteral">&quot;StayHere&quot;</span> /&gt;</div><div class="line">&lt;/<span class="keywordtype">response</span>&gt;</div></div><!-- fragment --><h2>###Recommended AI Tasks### </h2>
<p>The following AI tasks were used in testing well rounded NPCs. It is recommended that you start off with this AI Task list, and then customize as needed.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-1&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;BreakBlock&quot;</span>/&gt;</div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-2&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;Territorial&quot;</span>/&gt;</div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-3&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;ApproachAndAttackSDX, Mods&quot;</span> <span class="keyword">param1</span>=<span class="stringliteral">&quot;Entity,0&quot;</span> <span class="keyword">param2</span>=<span class="stringliteral">&quot;&quot;</span>  /&gt; </div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-4&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;ApproachAndFollowTargetSDX, Mods&quot;</span> <span class="keyword">param1</span>=<span class="stringliteral">&quot;Leader,foodCornOnTheCob&quot;</span>/&gt; </div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-5&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;PatrolSDX, Mods&quot;</span>/&gt; </div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-6&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;MaslowLevel1SDX, Mods&quot;</span>/&gt; </div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-7&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;Look&quot;</span>/&gt; </div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-8&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;WanderSDX, Mods&quot;</span>/&gt; </div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITask-9&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;&quot;</span> /&gt;</div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITarget-1&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;SetAsTargetIfHurtSDX, Mods&quot;</span> <span class="keyword">param1</span>=<span class="stringliteral">&quot;Entity&quot;</span>/&gt; </div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITarget-2&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;SetAsTargetIfLeaderAttackedSDX, Mods&quot;</span> <span class="keyword">param1</span>=<span class="stringliteral">&quot;Entity&quot;</span>/&gt; </div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITarget-3&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;SetAsTargetNearestEnemySDX, Mods&quot;</span> <span class="keyword">param1</span>=<span class="stringliteral">&quot;Entity,80&quot;</span>/&gt;</div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;AITarget-4&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;&quot;</span> /&gt;</div></div><!-- fragment --><h2>###Maslow### </h2>
<p>Loosely modeled around Maslow's Hierachy of Needs, the NPCs have requirements based on a combination of buffs and a new AI task. This buff is applied through the entityclass entry, and controls the NPCs' food and drink requirements. Over time, the NPCs will get hungry and thirsty, and, using the <a class="el" href="../../dc/db8/class_e_a_i_maslow_level1_s_d_x.html">EAIMaslowLevel1SDX</a> class, will seek out food and water through its xml configuration.</p>
<h4>Food and Water</h4>
<p>NPCs will look for food and water through their xml configured bins. Triggered by the HungryBuffs and ThirstyBuffs, the AI task will seek out food and water as needed, and consume it. Once satisfied, it'll continue to wander. </p><div class="fragment"><div class="line"><span class="comment">&lt;!-- which containers to look for food in --&gt;</span></div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;FoodBins&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;cntSecureStorageChest,cntStorageChest&quot;</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- what it can drink out of --&gt;</span></div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;WaterBins&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;water,waterMoving,waterStaticBucket,waterMovingBucket,terrWaterPOI&quot;</span> /&gt;</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- Default thirsty and hungry buffs --&gt;</span></div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ThirstyBuffs&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;buffStatusThirsty1,buffStatusThirsty2&quot;</span> /&gt;</div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;HungryBuffs&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;buffStatusHungry1,buffStatusHungry2&quot;</span> /&gt;</div></div><!-- fragment --><p>Each entity can be configured to eat a certain food type. The NPCs will scan for the FoodBins, then search inside and consume one of the listed food items. The value of food they receive is hard coded in the EAIMaslowLevel1 class initially, since some food items may not be have a food value, such as the hayBaleBlock. All foods satisfy the same amount of hunger.</p>
<p>Once an entity becomes too hungry or thirsty, it will start taking damage until it eventually dies.</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!-- Food items and bins that this entity will eat, if using the right AI Task --&gt;</span></div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;FoodItems&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;hayBaleBlock,resourceYuccaFibers,foodCropYuccaFruit,foodCornBread,foodCornOnTheCob,foodCornMeal,foodCropCorn,foodCropGraceCorn&quot;</span>/&gt;</div></div><!-- fragment --><h4>Sanitation</h4>
<p>As an optional feature, NPCs can be affected by a sanitation system. Over time, a sanitation level rises through a buff. Once this value reaches a threshold, the entity will need to use the bathroom. If a bathroom is not available, they will do their business on the ground.</p>
<p>If sanitation is turned on, the entity will search for a ToiletBlocks that is nearby. If found, it will go to the ToiletBlock and reset its sanitation level. This is useful for NPCs, but might not work out so well for animals.</p>
<p>If an entity does not have a toilet block, it will eventually drop a SanitationBlock. This will be useful in the future for different types of fertilizer.</p>
<p>By default, it is disabled.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;ToiletBlocks&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;cntToilet01,cntToilet02,cntToilet03&quot;</span> /&gt;</div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;SanitationBlock&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;terrDirt&quot;</span> /&gt; <span class="comment">&lt;!-- Poop block. If ToiletBlocks is configured, it&#39;ll use those rather than generate this block. --&gt;</span></div></div><!-- fragment --><h4>Home Block</h4>
<p>If configured, a Homeblock may be placed which will reset the entity's Home location. The blocks listed here will set the entity's Home Position, allow it to patrol around it using the vanilla Territorial AI task</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!-- This is the block it&#39;ll call home --&gt;</span></div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;HomeBlocks&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;cntCowHomeBlock,hayBaleBlock&quot;</span>/&gt;</div></div><!-- fragment --><h4>Starting Buffs</h4>
<p>NPCs are controlled mainly through the buff system. The default buffs are listed on the entity class, and are used to start off its hunger / thirsty stats, it's sanitation stats, etc.</p>
<div class="fragment"><div class="line"><span class="comment">&lt;!-- The starting buffs. Semi-colon delimited! Example for Animal Buffs --&gt;</span></div><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Buffs&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;buffAnimalStatusCheck;buffStatusCheck;buffAnimalBaby;buffSanitationStatusCheck;buffAnimalCow&quot;</span> /&gt;</div></div><!-- fragment --><h4>Names</h4>
<p>Each entity may have one or more names, configured through the XML files. When the entity is first spawned in, a name is randomly picked by the XML. The entity will be known as "Name the EntityName" in log files, along with its entity ID.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">property</span> <span class="keyword">name</span>=<span class="stringliteral">&quot;Names&quot;</span> <span class="keyword">value</span>=<span class="stringliteral">&quot;Bully,Duke,Hydro,Homer,Earl,Disel,Horns,Armor,Bob,Sampson,Tank,Kristof,Angus,Midnight,Nitrous,Red Bull,Moogan Freeman,Meatloaf,T-Bone,Mooshu,Leonardo DiCowprio,Cheeseburger,LovaBull,Hugh Heifer,Moossolini,Grassyella,Moo Rock,Rick Raws The Sause Bause,SteakHouse&quot;</span> /&gt;</div></div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
